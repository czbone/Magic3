/**
 * 表示データ作成用テンプレート(patTemplate)
 *
 * LICENSE: This source file is licensed under the terms of the GNU General Public License.
 *
 * @package    Magic3 Framework
 * @author     平田直毅(Naoki Hirata) <naoki@aplo.co.jp>
 * @copyright  Copyright 2006-2010 Magic3 Project.
 * @license    http://www.gnu.org/copyleft/gpl.html  GPL License
 * @version    SVN: $Id: inputparam.tmpl.html 3791 2010-11-08 07:07:17Z fishbone $
 * @link       http://www.magic3.org
 */
<patTemplate:tmpl name="_widget">
<script type="text/javascript">
//<![CDATA[
function gonext(){
	if (isInputValueChanged()){
		if (window.confirm('{_LC_MSG_CHANGE_CONFIG}')){
			document.main.act.value = 'save';
			document.main.submit();
			return true;			
		}
	}
	document.main.task.value = 'checkdb';
	document.main.submit();
	return false;
}
function gofore(){
	if (isInputValueChanged()){
		if (window.confirm('{_LC_MSG_CHANGE_CONFIG}')){
			document.main.act.value = 'save';
			document.main.submit();
			return true;			
		}
	}
	document.main.task.value = 'checkenv';
	document.main.submit();
	return false;
}
function createdef(){
	if (!window.confirm('{_LC_MSG_UPDATE_CONFIG}')) return false;
	document.main.act.value = 'save';
	document.main.submit();
	return false;
}
function testdb(){
	document.main.act.value = 'testdb';
	document.main.submit();
	return false;
}
function isInputValueChanged(){
	if (document.main.h_hostname.value != document.main.hostname.value ||
		document.main.h_dbname.value != document.main.dbname.value ||
		document.main.h_dbuser.value != document.main.dbuser.value ||
		document.main.h_password.value != document.main.password.value){
		return true;
	} else {
		return false;
	}
}
//]]>
</script>
<div align="center">
<br />
<form method="post" name="main" class="form">
<input type="hidden" name="lang" value="{LANG}" />
<input type="hidden" name="task" value="inputparam" />
<input type="hidden" name="act" />
<input type="hidden" name="h_hostname" value="{HOSTNAME}" />
<input type="hidden" name="h_dbname" value="{DBNAME}" />
<input type="hidden" name="h_dbuser" value="{DBUSER}" />
<input type="hidden" name="h_password" value="{PASSWORD}" />
<table>
<tr><td align="center">
<h2>{_LC_TITLE_INPUT_SITE_INFO}</h2>
<!-- m3:ErrorMessage -->
<table class="simple-table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
      <th colspan="2">{_LC_LABEL_SITE_INFO}</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>{_LC_LABEL_ROOT_URL}</td>
      <td><input name="rooturl" type="text" class="textbox-imeoff" size="50" maxlength="100" value="{ROOT_URL}" /></td>
    </tr>
    </tbody>
</table>
<br />
<table class="simple-table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
      <th colspan="2">{_LC_LABEL_DB_INFO}</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>{_LC_LABEL_DB_TYPE}</td>
      <td>
      <patTemplate:tmpl name="db_mysql" visibility="hidden">
        <input name="dbtype" type="radio" value="mysql" {CHECKED} />MySQL
      </patTemplate:tmpl>
      <patTemplate:tmpl name="db_pgsql" visibility="hidden">
        <input name="dbtype" type="radio" value="pgsql" {CHECKED} />PostgreSQL
      </patTemplate:tmpl>
      </td>
    </tr>
    <tr class="even">
      <td>{_LC_LABEL_DB_HOSTNAME}</td>
      <td><input name="hostname" type="text" class="textbox-imeoff" size="30" maxlength="30" value="{HOSTNAME}" /></td>
    </tr>
    <tr>
      <td>{_LC_LABEL_DB_NAME}</td>
      <td><input name="dbname" type="text" class="textbox-imeoff" size="30" maxlength="64" value="{DBNAME}" /></td>
    </tr>
    <tr class="even">
      <td>{_LC_LABEL_DB_USER}</td>
      <td><input name="dbuser" type="text" class="textbox-imeoff" size="30" maxlength="30" value="{DBUSER}" /></td>
    </tr>
    <tr>
      <td>{_LC_LABEL_DB_PASSWORD}</td>
      <td><input name="password" type="text" class="textbox-imeoff" size="30" maxlength="64" value="{PASSWORD}" /></td>
    </tr>
    <tr class="even">
      <td><input type="button" class="button" onclick="testdb();" value="{_LC_LABEL_TEST_CONNECTION}" /></td>
      <td>{DB_TEST}</td>
    </tr>
    </tbody>
</table>
</td></tr>
<tr><td>
<div align="right"><input type="button" class="button" onclick="gofore();" value="{_LC_LABEL_GO_BACK}" /><input type="button" class="button" onclick="createdef();" value="{_LC_LABEL_UPDATE_CONFIG}" /><input type="button" class="button" onclick="gonext()" value="{_LC_LABEL_GO_NEXT}" {BUTTON_DISABLED} /></div>
</td></tr>
</table>
</form>
</div>
</patTemplate:tmpl>
